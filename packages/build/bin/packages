#!/usr/bin/env node

const r = new RegExp(process.argv[2] ? `^${process.argv[2]}` : `^.+$`);
const rr = process.argv[3] || '';

require('child_process').exec('yarn workspaces info --json --prod', (e, raw) => {
    const o = JSON.parse(JSON.parse(raw).data);
    Object.keys(o).forEach(p => r.test(o[p].location) && (() => console.log(p.replace(rr, '')))(o[p]));
});